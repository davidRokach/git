<!DOCTYPE html>
<html>
  <head>
    <title>Tetris</title>
  </head>
  <body>
    <canvas id="tetris" width="200" height="400"></canvas>
    <script>
      const canvas = document.getElementById("tetris");
      const context = canvas.getContext("2d");

      const matrix = [
        [0, 0, 0],
        [1, 1, 1],
        [0, 1, 0],
      ];

      const player = {
        pos: { x: 5, y: 5 },
        matrix: matrix,
      };

      document.addEventListener("keydown", (event) => {
        switch (event.keyCode) {
          case 37: // Left arrow key
            player.pos.x--;
            break;
          case 38: // Up arrow key
            rotateMatrix(player.matrix);
            break;
          case 39: // Right arrow key
            player.pos.x++;
            break;
          case 40: // Down arrow key
            player.pos.y++;
            break;
        }
      });

      function rotateMatrix(matrix) {
        // Rotate the matrix by transposing and reversing it
        const rotatedMatrix = matrix[0].map((_, index) =>
          matrix.map((row) => row[index])
        );
        matrix.length = 0;
        rotatedMatrix.forEach((row) => matrix.push(row.reverse()));
      }

      function draw() {
        context.fillStyle = "#000";
        context.fillRect(0, 0, canvas.width, canvas.height);

        drawMatrix(player.matrix, player.pos);
      }

      function drawMatrix(matrix, offset) {
        matrix.forEach((row, y) => {
          row.forEach((value, x) => {
            if (value !== 0) {
              context.fillStyle = "red";
              context.fillRect(x + offset.x, y + offset.y, 1, 1);
            }
          });
        });
      }

      function update() {
        draw();
        requestAnimationFrame(update);
      }

      update();
    </script>
  </body>
</html>
